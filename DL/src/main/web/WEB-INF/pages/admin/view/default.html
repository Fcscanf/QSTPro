<html>
<head>
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
    <script src="/js/page.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>后台首页</title></head>
<link type="text/css" rel="stylesheet" href="/css/style.css">
<body>
<center>

    <table id="searchResult" border="0" cellpadding="0" cellspacing="0" width="650" height="300">
        <thead>
        <tr align="center" height="30" bgcolor="#F0F0F0">
            <td width="6%"><b>序号</b></td>
            <td width="11%"><b>信息类别</b></td>
            <td width="8%"><b>ID值</b></td>
            <td width="38%"><b>信息标题</b></td>
            <td width="22%"><b>发布时间</b></td>
            <td width="15%"><b>联系人</b></td>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <!--显示分页的信息-->
    <div class="row">
        <!--分页文字信息-->
        <div class="col-md-6" align="left" id="page_info_area">
        </div>
        <!--分页条信息-->
        <div class="col-md-6" align="right" id="page_nav_area">
        </div>
    </div>
</center>
</body>
<script>

    function getInfo(pN) {
        var pay = window.localStorage.getItem("m_pay");
        var check = window.localStorage.getItem("m_check");
        var type = window.localStorage.getItem("m_type");
        var pageSize = 5;
        $.ajax({
            url:"/info/select",
            type:"post",
            data:{
                pageNum:pN,
                pageSize:pageSize,
                infoPayfor:pay,
                infoCheck:check,
                infoType:type
            },
            success:function (result) {
                build_result(result);
                build_page_info(result);
                build_page_nav(result);
            }
        })
    }

    // 解析并显示结果集
    function build_result(result) {
        $("#searchResult tbody").empty();
        var infos = result.extend.page.list;
        console.log(infos);
        $.each(infos, function (index, item) {
            var id = $("<td></td>").append(index + 1);
            var infoType = $("<td></td>").append(item.type.typeName);
            var infoId = $("<td></td>").append(item.id);
            var infoTitle = $("<td></td>").append(item.infoTitle);
            var infoDate = $("<td></td>").append(item.infoDate);
            var infoLinkman = $("<td></td>").append(item.infoLinkman);
            $("<tr></tr>").append(id)
                .append(infoType)
                .append(infoId)
                .append(infoTitle)
                .append(infoDate)
                .append(infoLinkman)
                .appendTo("#searchResult tbody");
        })
    }
</script>
</html>